<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Photo Enhancer</title>

<style>
body{
  margin:0;
  background:#111;
  font-family:Arial;
  text-align:center;
  color:white;
}

.container{
  padding:20px;
}

canvas{
  max-width:95%;
  margin-top:15px;
  border-radius:12px;
}

button{
  background:#00c3ff;
  border:none;
  padding:12px 20px;
  margin:10px;
  border-radius:8px;
  font-size:16px;
  cursor:pointer;
}

input[type="range"]{
  width:80%;
}
</style>
</head>

<body>

<div class="container">
<h2>ðŸ”¥ AI Photo Enhancer</h2>

<input type="file" id="upload" accept="image/*"><br>

<canvas id="canvas"></canvas>

<div>
  <p>Sharpness</p>
  <input type="range" id="sharp" min="0" max="3" step="0.1" value="1">
  
  <p>Black Boost</p>
  <input type="range" id="black" min="0" max="100" value="30">
  
  <p>Contrast</p>
  <input type="range" id="contrast" min="0" max="200" value="120">
  
  <p>Brightness</p>
  <input type="range" id="bright" min="0" max="200" value="105">
</div>

<button onclick="enhance()">âœ¨ Auto Enhance</button>
<button onclick="download()">â¬‡ Download</button>

</div>

<script>

let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");
let img = new Image();

document.getElementById("upload").addEventListener("change", function(e){
    let reader = new FileReader();
    reader.onload = function(event){
        img.onload = function(){
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img,0,0);
        }
        img.src = event.target.result;
    }
    reader.readAsDataURL(e.target.files[0]);
});

function enhance(){

    ctx.drawImage(img,0,0);

    let imageData = ctx.getImageData(0,0,canvas.width,canvas.height);
    let data = imageData.data;

    let contrast = document.getElementById("contrast").value / 100;
    let brightness = document.getElementById("bright").value / 100;
    let blackBoost = document.getElementById("black").value;

    for(let i=0;i<data.length;i+=4){

        data[i] = ((data[i]-128)*contrast+128)*brightness;
        data[i+1] = ((data[i+1]-128)*contrast+128)*brightness;
        data[i+2] = ((data[i+2]-128)*contrast+128)*brightness;

        // Deep black boost
        if(data[i] < blackBoost){
            data[i] = 0;
            data[i+1] = 0;
            data[i+2] = 0;
        }

    }

    ctx.putImageData(imageData,0,0);

    sharpen();
}

function sharpen(){

    let sharpness = parseFloat(document.getElementById("sharp").value);

    if(sharpness <= 0) return;

    let weights = [
        0,-1*sharpness,0,
        -1*sharpness,5*sharpness,-1*sharpness,
        0,-1*sharpness,0
    ];

    let side = Math.round(Math.sqrt(weights.length));
    let halfSide = Math.floor(side/2);

    let src = ctx.getImageData(0,0,canvas.width,canvas.height);
    let sw = src.width;
    let sh = src.height;
    let srcData = src.data;

    let output = ctx.createImageData(sw,sh);
    let dstData = output.data;

    for(let y=0;y<sh;y++){
        for(let x=0;x<sw;x++){

            let sy = y;
            let sx = x;
            let dstOff = (y*sw+x)*4;

            let r=0,g=0,b=0;

            for(let cy=0;cy<side;cy++){
                for(let cx=0;cx<side;cx++){

                    let scy = Math.min(sh-1,Math.max(0,sy+cy-halfSide));
                    let scx = Math.min(sw-1,Math.max(0,sx+cx-halfSide));
                    let srcOff = (scy*sw+scx)*4;
                    let wt = weights[cy*side+cx];

                    r+=srcData[srcOff]*wt;
                    g+=srcData[srcOff+1]*wt;
                    b+=srcData[srcOff+2]*wt;
                }
            }

            dstData[dstOff]=r;
            dstData[dstOff+1]=g;
            dstData[dstOff+2]=b;
            dstData[dstOff+3]=255;
        }
    }

    ctx.putImageData(output,0,0);
}

function download(){
    let link=document.createElement("a");
    link.download="enhanced.png";
    link.href=canvas.toDataURL("image/png",1.0);
    link.click();
}

</script>

</body>
</html>
